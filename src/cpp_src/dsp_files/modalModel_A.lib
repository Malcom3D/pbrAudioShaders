import("dsp_files/faustlib/stdfaust.lib");

modalModel_A(exPos,t60Scale) = _ <: par(mode,nModes,pm.modeFilter(modeFreqs(mode),modesT60s(mode),modesGains(int(exPos),mode))) :> /(nModes)
with{
nModes = 6;
nExPos = 8;
modeFreqsUnscaled(n) = ba.take(n+1,(184.395,184.395,184.401,225.647,281.02,504.776));
modeFreqs(mode) = modeFreqsUnscaled(mode);
modesGains(p,n) = waveform{1,0.999992,0.81651,0.816481,0.999972,0.816518,1,0.999995,0.816515,0.816484,0.999979,0.816523,0.612354,0.612359,1,0.999974,0.612363,0.999991,0.612355,0.612359,1,0.999976,0.612364,0.999991,0.612356,0.61236,1,0.999976,0.612364,0.999992,0.612355,0.612359,1,0.999975,0.612363,0.999991,0.999968,0.999962,0.816284,0.816474,1,0.816333,0.999975,0.999966,0.816285,0.816477,1,0.816334},int(p*nModes+n) : rdtable;
modesT60s(n) = t60Scale * ba.take(n+1,(0.639718,0.639718,0.639675,0.427527,0.27535,0.0839825));
};
